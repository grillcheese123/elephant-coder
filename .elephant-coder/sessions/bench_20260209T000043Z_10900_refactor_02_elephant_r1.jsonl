{"ts": "2026-02-09T00:07:05Z", "session_id": "bench_20260209T000043Z_10900_refactor_02_elephant_r1", "role": "user", "command": "/code", "run_id": "run_4198a299a9b1", "content": "Refactor context-profile selection into cleaner strategy functions for maintainability."}
{"ts": "2026-02-09T00:07:05Z", "session_id": "bench_20260209T000043Z_10900_refactor_02_elephant_r1", "role": "assistant", "command": "/code", "run_id": "run_4198a299a9b1", "content": "{\"summary\": \"Refactor context-profile selection into cleaner strategy functions for maintainability.\", \"project\": {\"language\": \"python\"}, \"files\": [{\"path\": \"elephant_coder/context_profiles.py\", \"content\": \"\\\"\\\"\\\"Context profile selection strategies for Elephant Coder.\\\"\\\"\\\"\\n\\nfrom __future__ import annotations\\n\\nfrom pathlib import Path\\nfrom typing import Callable\\n\\n\\n# Type alias for context profile strategies\\nContextProfileStrategy = Callable[[Path], dict[str, str]]\\n\\n\\ndef get_default_profile(project_root: Path) -> dict[str, str]:\\n    \\\"\\\"\\\"Default context profile for general Python projects.\\\"\\\"\\\"\\n    return {\\n        \\\"project_type\\\": \\\"python\\\",\\n        \\\"context_depth\\\": \\\"standard\\\",\\n        \\\"include_tests\\\": \\\"true\\\",\\n        \\\"include_docs\\\": \\\"false\\\",\\n    }\\n\\n\\ndef get_test_heavy_profile(project_root: Path) -> dict[str, str]:\\n    \\\"\\\"\\\"Context profile optimized for test-heavy projects.\\\"\\\"\\\"\\n    return {\\n        \\\"project_type\\\": \\\"python\\\",\\n        \\\"context_depth\\\": \\\"deep\\\",\\n        \\\"include_tests\\\": \\\"true\\\",\\n        \\\"include_docs\\\": \\\"false\\\",\\n    }\\n\\n\\ndef get_docs_heavy_profile(project_root: Path) -> dict[str, str]:\\n    \\\"\\\"\\\"Context profile optimized for documentation-heavy projects.\\\"\\\"\\\"\\n    return {\\n        \\\"project_type\\\": \\\"python\\\",\\n        \\\"context_depth\\\": \\\"standard\\\",\\n        \\\"include_tests\\\": \\\"true\\\",\\n        \\\"include_docs\\\": \\\"true\\\",\\n    }\\n\\n\\ndef detect_profile(project_root: Path) -> ContextProfileStrategy:\\n    \\\"\\\"\\\"Detect the most appropriate context profile based on project structure.\\\"\\\"\\\"\\n    # Check for test directories\\n    tests_dir = project_root / \\\"tests\\\"\\n    if tests_dir.exists() and any(tests_dir.glob(\\\"*.py\\\")):\\n        return get_test_heavy_profile\\n\\n    # Check for docs directories\\n    docs_dir = project_root / \\\"docs\\\"\\n    if docs_dir.exists() and any(docs_dir.glob(\\\"*.md\\\")):\\n        return get_docs_heavy_profile\\n\\n    # Default profile\\n    return get_default_profile\\n\\n\\ndef select_context_profile(project_root: Path) -> dict[str, str]:\\n    \\\"\\\"\\\"Select and apply the appropriate context profile for the project.\\\"\\\"\\\"\\n    strategy = detect_profile(project_root)\\n    return strategy(project_root)\\n\"}], \"dependencies\": {\"dependencies\": {}, \"devDependencies\": {}}, \"commands\": [\"python -m pytest tests/ -v\", \"python scripts/elephant_cli.py --help\"]}"}
